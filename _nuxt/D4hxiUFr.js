import{Z as I,$ as V,Q as L,i as W,a0 as K,a1 as Q,a2 as Z,h as R,a3 as B,V as U,a4 as X,c as C,a5 as S,u as Y,a6 as ee}from"#entry";function te(e){return K()?(Q(e),!0):!1}const ne=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const re=Object.prototype.toString,oe=e=>re.call(e)==="[object Object]",ie=()=>{};function ae(...e){if(e.length!==1)return Z(...e);const r=e[0];return typeof r=="function"?L(B(()=>({get:r,set:ie}))):R(r)}function ue(e,r){function t(...i){return new Promise((l,f)=>{Promise.resolve(e(()=>r.apply(this,i),{fn:r,thisArg:this,args:i})).then(l).catch(f)})}return t}const P=e=>e();function le(e=P,r={}){const{initialState:t="active"}=r,i=ae(t==="active");function l(){i.value=!1}function f(){i.value=!0}const c=(...o)=>{i.value&&e(...o)};return{isActive:L(i),pause:l,resume:f,eventFilter:c}}function T(e){return Array.isArray(e)?e:[e]}function se(e){return U()}function ce(e,r,t={}){const{eventFilter:i=P,...l}=t;return W(e,ue(i,r),l)}function fe(e,r,t={}){const{eventFilter:i,initialState:l="active",...f}=t,{eventFilter:c,pause:o,resume:a,isActive:u}=le(i,{initialState:l});return{stop:ce(e,r,{...f,eventFilter:c}),pause:o,resume:a,isActive:u}}function de(e,r=!0,t){se()?I(e,t):r?e():V(e)}function pe(e,r,t){return W(e,r,{...t,immediate:!0})}const F=ne?window:void 0;function ve(e){var r;const t=S(e);return(r=t?.$el)!=null?r:t}function z(...e){const r=[],t=()=>{r.forEach(o=>o()),r.length=0},i=(o,a,u,p)=>(o.addEventListener(a,u,p),()=>o.removeEventListener(a,u,p)),l=C(()=>{const o=T(S(e[0])).filter(a=>a!=null);return o.every(a=>typeof a!="string")?o:void 0}),f=pe(()=>{var o,a;return[(a=(o=l.value)==null?void 0:o.map(u=>ve(u)))!=null?a:[F].filter(u=>u!=null),T(S(l.value?e[1]:e[0])),T(Y(l.value?e[2]:e[1])),S(l.value?e[3]:e[2])]},([o,a,u,p])=>{if(t(),!o?.length||!a?.length||!u?.length)return;const y=oe(p)?{...p}:p;r.push(...o.flatMap(N=>a.flatMap(h=>u.map(w=>i(N,h,w,y)))))},{flush:"post"}),c=()=>{f(),t()};return te(t),c}const E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},A="__vueuse_ssr_handlers__",ye=ge();function ge(){return A in E||(E[A]=E[A]||{}),E[A]}function me(e,r){return ye[e]||r}function Se(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const he={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},J="vueuse-storage";function we(e,r,t,i={}){var l;const{flush:f="pre",deep:c=!0,listenToStorageChanges:o=!0,writeDefaults:a=!0,mergeDefaults:u=!1,shallow:p,window:y=F,eventFilter:N,onError:h=n=>{console.error(n)},initOnMounted:w}=i,m=(p?X:R)(typeof r=="function"?r():r),v=C(()=>S(e));if(!t)try{t=me("getDefaultStorage",()=>{var n;return(n=F)==null?void 0:n.localStorage})()}catch(n){h(n)}if(!t)return m;const g=S(r),j=Se(g),b=(l=i.serializer)!=null?l:he[j],{pause:_,resume:M}=fe(m,n=>q(n),{flush:f,deep:c,eventFilter:N});W(v,()=>O(),{flush:f});let D=!1;const x=n=>{w&&!D||O(n)},$=n=>{w&&!D||H(n)};y&&o&&(t instanceof Storage?z(y,"storage",x,{passive:!0}):z(y,J,$)),w?de(()=>{D=!0,O()}):O();function k(n,s){if(y){const d={key:v.value,oldValue:n,newValue:s,storageArea:t};y.dispatchEvent(t instanceof Storage?new StorageEvent("storage",d):new CustomEvent(J,{detail:d}))}}function q(n){try{const s=t.getItem(v.value);if(n==null)k(s,null),t.removeItem(v.value);else{const d=b.write(n);s!==d&&(t.setItem(v.value,d),k(s,d))}}catch(s){h(s)}}function G(n){const s=n?n.newValue:t.getItem(v.value);if(s==null)return a&&g!=null&&t.setItem(v.value,b.write(g)),g;if(!n&&u){const d=b.read(s);return typeof u=="function"?u(d,g):j==="object"&&!Array.isArray(d)?{...g,...d}:d}else return typeof s!="string"?s:b.read(s)}function O(n){if(!(n&&n.storageArea!==t)){if(n&&n.key==null){m.value=g;return}if(!(n&&n.key!==v.value)){_();try{const s=b.write(m.value);(n===void 0||n?.newValue!==s)&&(m.value=G(n))}catch(s){h(s)}finally{n?V(M):M()}}}}function H(n){O(n.detail)}return m}function be(e,r,t={}){const{window:i=F}=t;return we(e,r,i?.localStorage,t)}const Ee=ee("cart",()=>{const e=be("cart",[],{listenToStorageChanges:!0,mergeDefaults:!0}),r=C(()=>e.value.reduce((c,o)=>c+o.price*o.qty,0)),t=C(()=>e.value.reduce((c,o)=>c+o.qty,0));function i(c,o=1){const a=e.value.find(u=>u.id===c.id);a?a.qty+=o:e.value.push({...c,qty:o})}function l(c){e.value=e.value.filter(o=>o.id!==c)}function f(){e.value=[]}return{items:e,total:r,count:t,add:i,remove:l,clear:f}},{persist:!0});export{Ee as u};
